<!DOCTYPE html>
<html lang="en">

<head>
  <title>Test AJAX page</title>
  <link rel="stylesheet" type="text/css" href="./lab_styles.css">
</head>

<body>
  <div class="container">
    <div class="wrapper">
      <div class="header">Test AJAX page</div>
      <button class="button" onclick="loadData()">Load Some JSON</button>
      <div class="content"></div>
      <div class="footer"></div>
    </div>
  </div>
  <script>

    function getRandomIntInclusive(min = 0, max = 242) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive 
    } 
    function loadData() {
      fetch('ajax_sample.json')
        .then(res => res.json())
        .then(res => 
        {
          //console.log(res);
         // const list = JSON.parse(res);
          //console.log(list);

          const dupArr = [];
          dupArr[242] = false;
          dupArr.fill(false, 0, 242); 

          let instr = document.querySelector(".content");
          let e = document.createElement("ol");
          instr.appendChild(e);
          instr = document.querySelector("ol");


          for(let i = 0; i < 15; i++) {

            let x = false;
            let y = 0;
            let z = 0;
            //No duplicate countries in the list.
            while (x === false) {
              z++;
              y = getRandomIntInclusive();
              if (dupArr[y] === false){
                x = true;
                dupArr[y] = true;
              }
            }
            let nEl = document.createElement("li");
            nEl.innerText = res[y].name + ": " + res[y].code ; // + " --> " + z + " iterations";
            instr.appendChild(nEl); 


          }


          }
          







        )
        //.then(data => document.querySelector(".content").innerText = data );
        
    }
  </script>
</body>
   
</html>